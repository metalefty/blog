+++
date = "2019-03-07"
draft = false
lastmod = "2019-03-08T00:58:41+09:00"
title = "SoftEther 5のFreeBSD portを作成した (Raspberry Piで使えます)"
tags = ['SoftEtherVPN']
+++

[SoftEther](http://ja.softether.org/)の解説は不要だと思いますが、筑波大学における学術目的の研究プロジェクトとして開発された強力なVPNソフトウェアで、高い移植性を念頭に開発されており、FreeBSDでの動作も[公式にサポートしています](https://ja.softether.org/3-spec)。

SoftEtherの最新リリースは、 [4.29 Build 9680 RTM](https://www.softether-download.com/files/softether/) というバージョンです。余談ですが、このバージョンからupstreamでのライセンス変更が適用されていて、従来のGPLv2からApache License 2.0で提供されています。

そんなSoftEther 4ですが、FreeBSD上で動作させる場合はIntel i386/amd64アーキテクチャのみをサポートします(公式サイトの[SoftEther VPN Server の仕様](https://ja.softether.org/3-spec)より)。ARMやMIPSなどのアーキテクチャでは使用することができません。FreeBSDのBSDライセンス、SoftEtherのApache License 2.0共々、組み込み機器で使いやすいライセンスにも関わらずSoftEtherがIntel以外のアーキテクチャで使用できないのは残念です。平たくいうと、Raspberry Piでは使えません。

実はGitHubで開発されている[SoftEtherの開発版であるバージョン5系](https://github.com/SoftEtherVPN/SoftEtherVPN)では、この「FreeBSDではi386とamd64のみサポート」いう制限がなくなっています。詳しく調べたわけではありませんが、特定のOSではサポートされるアーキテクチャが限定されるということはなくなり、OSによらず以下のアーキテクチャをサポートするようです。

* Intel i386/amd64
* ARM (arm/aarch64)
* MIPS
* PowerPC

というわけで、FreeBSD portsに[SoftEther 5をコミットしました](https://svnweb.freebsd.org/ports/head/security/softether5/)。これでRaspberry PiなどのARMデバイスでもSoftEtherを使ったVPNサーバ/VPNルータを構築できるようになりますね。

SoftEther 5は開発版なので、安定動作することは保証されていない点には注意が必要です。安定版が必要な場合には当面はIntel CPU上で動作させる必要があります。


書くまでもないかもしれませんが、一応インストール方法を書いておきます。

```shell
portsnap fetch update
cd /usr/ports/security/softether5
make install
```


```shell
pkg update
pkg install softether5
```

バイナリパッケージはアーキテクチャによっては提供されていない場合があります。


